---
import { getCollection } from 'astro:content'
import DefaultLayout from '../../layouts/DefaultLayout.astro'
import PageHeader from '../../components/PageHeader.astro'
import ExternalLink from '../../components/ExternalLink.astro'
import type { CollectionEntry } from 'astro:content'

const posts = (await getCollection('anthologies')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
) as CollectionEntry<'anthologies'>[]
---

<DefaultLayout title="Anthologies">
  <PageHeader
    title="Anthologies"
    subtitle="A collection of stories and reflections on the journey from Scrum to Lean."
  />
  <section class="my-24">
    <div class="container">
      <ul class="space-y-8">
        {
          posts.map((post) => (
            <li class:list={['grid grid-cols-1 gap-8', { 'md:grid-cols-3': post.data.image }]}>
              {post.data.image && (
                <div class="md:col-span-1">
                  <a href={`/anthologies/${post.slug}`}>
                    <img src={post.data.image} alt={post.data.imageAlt} class="rounded-lg" />
                  </a>
                </div>
              )}
              <div class:list={[post.data.image ? 'md:col-span-2' : '']}>
                <h3 class="text-2xl font-bold">
                  <a href={`/anthologies/${post.slug}`}>{post.data.title}</a>
                </h3>
                <p class="mt-2">{post.data.description}</p>
                <div class="mt-4 flex items-center justify-end">
                  <p class="mr-4 text-sm text-gray-500">by {post.data.author}</p>
                  <p class="text-sm">
                    <ExternalLink href={post.data.originUrl}>Read the original</ExternalLink>
                  </p>
                </div>
              </div>
            </li>
          ))
        }
      </ul>Â¶
    </div>
  </section>
</DefaultLayout>
