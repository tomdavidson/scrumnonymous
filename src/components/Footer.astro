---
import ExternalLink from './ExternalLink.astro'
import CallToAction from '@components/CallToAction.astro'
import Logo from './Logo.astro'
import ContributorList from './ContributorList.astro'

/**
 * Footer Component
 *
 * @description A component that displays the footer of the website
 */
const currentYear = new Date().getFullYear()
---

<footer>
  <div id="get-help">
    <CallToAction
      title="Need a Sponsor?"
      content="If you feel the sprint treadmill dragging you back, hey@scrumnonymous.org. Volunteers are standing by with Monte Carlo spreadsheets, Kanban, and a shoulder to cry on when someone schedules yet another backlog-refinement session.<br/><br/>Together we can stay Scrum-free—one day, one flow unit at a time."
      link="mailto:hey@scrumnonymous.org"
      linkText="Contact"
    />
  </div>
  <section class="py-20">
    <h2 class="sr-only">Footer</h2>
    <div class="container grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
      <div class="flex flex-col gap-4 lg:col-span-1">
        <h3 class="text-2xl font-bold">Contributors</h3>
        <ContributorList owner="tomdavidson" repo="scrumnonymous" />
      </div>
      <div class="flex flex-col gap-4">
        <h3 class="text-2xl font-bold">Lean Software Development</h3>
        <ul class="flex flex-col gap-2">
          <li>
            <ExternalLink href="https://www.netguru.com/blog/lean-software-development/">Netguru</ExternalLink>
          </li>
          <li>
            <ExternalLink href="https://www.n-ix.com/lean-software-development/">N-iX</ExternalLink>
          </li>
          <li>
            <ExternalLink href="https://en.wikipedia.org/wiki/Lean_software_development">Wikipedia</ExternalLink>
          </li>
        </ul>
      </div>
      <div class="flex flex-col items-end justify-end gap-4">
        <Logo loading="lazy" />
        <p class="leading-[2]">A 12 step guide to Scrum recovery.</p>
      </div>
    </div>
  </section>

  <section class="py-8">
    <div class="footer-attribution-container container text-center md:text-left">
      <div class="copyright-info">
        <p class="text-sm leading-relaxed">
          <a href="https://scrumnonymous.org" class="font-medium">Scrumnonymous</a>
          © {currentYear} by <a href="https://creativecommons.org" class="font-medium">Tom Davidson</a> is licensed under
          <a href="https://creativecommons.org/licenses/by/4.0/" class="font-medium">CC BY 4.0</a>
          <span class="cc-icons">
            <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="" class="cc-icon" />
            <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="" class="cc-icon" />
          </span>
        </p>
      </div>
      <div class="attribution-info">
        <p class="text-sm leading-relaxed md:text-right">
          Made with ❤️ by <a href="https://github.com/tomdavidson" class="font-medium">Tom Davidson</a>
          with Mark Teekman's <a href="https://astro.build/themes/details/accessible-astro-starter/" class="font-medium"
            >Accessible Astro Starter Theme</a
          >.
        </p>
      </div>
    </div>
  </section>
</footer>

<style>
  section {
    border-top: 1px solid var(--border-color-subtle);
  }

  a:hover {
    color: var(--link-hover-color);
  }

  .footer-attribution-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .copyright-info,
  .attribution-info {
    flex: 1;
    min-width: 0; /* Allow flex items to shrink */
  }

  .cc-icons {
    display: inline-flex;
    align-items: center;
    gap: 0.2rem;
    margin-left: 0.2rem;
  }

  .cc-icon {
    display: inline-block;
    vertical-align: middle;
    max-width: 1em;
    max-height: 1em;
  }

  /* Mobile-specific adjustments */
  @media (max-width: 768px) {
    .copyright-info,
    .attribution-info {
      text-align: center;
    }

    .copyright-info p,
    .attribution-info p {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
  }

  /* Large screen adjustments */
  @media (min-width: 768px) {
    .footer-attribution-container {
      flex-direction: row;
      justify-content: space-between;
      gap: 33%; /* 33% of container width gap */
    }

    .attribution-info {
      text-align: right;
    }
  }
</style>
